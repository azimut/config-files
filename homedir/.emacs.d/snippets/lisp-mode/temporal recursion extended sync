# -*- mode: snippet -*-
# name: temporal recursion extended sync
# key: temporal-res
# --
(defun ${1:fun-name} (beat time)
  (let ((n-beat (+ beat ${2:.5})))
    (play-midi-note time 50 30 $2 ${3:1})
    (aat (funcall *metro* n-beat) #'$1 n-beat it)))

($1 (funcall *metro* 'get-beat ${4:4})
    (funcall *metro* (funcall *metro* 'get-beat $4)))

(fluidsynth:program-change *synth* $3 1)
